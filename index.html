<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>TableSetter</title>
    <link rel="stylesheet" type="text/css" href="documentation/css/styles.css" />
    <link rel="stylesheet" type="text/css" href="documentation/css/dawn.css" />
  </head>
  
  <body>
    <a href="http://www.propublica.org" class="propublica">&nbsp;</a>
    <h1>TableSetter <small>&ndash; Version: 0.1.1</small></h1>
    <p><strong>TableSetter</strong> is a sinatra app which provides an easy way to present CSVs hosted locally or remotely in custom HTML. For example given a simple configuration file, <strong>TableSetter</strong> can show <a href="documentation/tables/example_local/">a list of all stimulus projects from last year</a>, <a href="documentation/tables/example_formatted/">the stimulus spending progress</a>, or <a href="documentation/tables/example/">a list of failed banks due to the last recession</a>.</p>
    <p>Each table is filterable and sortable on multiple columns. Also each column can be formatted in multiple styles. In production mode, <strong>TableSetter</strong> provides valid expires headers and can be coupled with an upstream cache like <a href="http://rtomayko.github.com/rack-cache/">Rack::Cache</a> or varnish for speedy presentation.</p>
    <h2><a name="toc">Table of Contents</a></h2>
    <ul>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#tablesetter">The table-setter command</a></li>
      <li><a href="#thedirectory">The Configuration Directory</a></li>
      <li><a href="#thefile">A TableSetter File</a></li>
      <li><a href="#usage">Usage</a></li>
      <li><a href="#deployment">Deployment</a></li>
      <li><a href="#rails">Rails</a></li>
      <li><a href="#links">Links</a></li>
      <li><a href="#credits">Credits</a></li>
      <li><a href="#license">License</a></li>
    </ul>
    <h2><a name="installation" href="#toc">Installation</a></h2>
    <p>Install <strong>TableSetter</strong> through rubygems:</p>
    <pre class="dawn">
gem install table_setter</pre>
    <p>or from the source files:</p>
    <pre class="dawn">
git clone git://github.com/propublica/table-setter.git
cd table-setter
rake install</pre>
    <p>After you've installed the gem you'll have a new executable: <strong>table-setter</strong>. You can view the subcommands available by typing <strong>table-setter --help</strong>. To set things up you'll need to run it with the <strong>install</strong> command to install the configuration files and ERB templates into a directory. </p>
    <pre>
table-setter install path/to/directory</pre>
    <p>
      To start the development server run: 
    </p>
    <pre>
table-setter start path/to/directory</pre>
    <p>Go to development url, <a href="http://localhost:3000/">http://localhost:3000/</a> and you'll see a list of the example tables. Here's what a table looks like (you can also peruse examples <a href="http://propublica.github.com/table-setter/documentation/tables/">here</a>.):</p>
    <img src="documentation/images/screen.png">
    <h2><a name="tablesetter" href="#toc">The table-setter command</a></h2>
    <p>
      The <strong>table-setter</strong> command responds to three subcommands:
      <ul>
        <li><strong>install</strong></li>
        <li><strong>start</strong></li>
        <li><strong>build</strong></li>
      </ul>
    </p>
    <h2><a name="thedirectory" href="#toc">The Configuration Directory</a></h2>
    <p>
      The configuration folder contains the javascripts, stylesheets, view templates (written in <a href="http://www.ruby-doc.org/stdlib/libdoc/erb/rdoc/">ERB</a>), rackup file, and most importantly the configuration files for each table.
    </p>
    <p class="file">
      The <strong>config.ru</strong> directory instructs the webserver to start the <strong>TableSetter</strong> application and serve the assets contained in the configuration folder. In most cases you'll want to use apache and passenger (see <a href="#deployment">Deployment</a> for details).
    </p>
    <p class="dir">
      In <strong>public</strong> you'll find the static assets required for the look and feel and functionality of the table:
      <ul>
        <li class="dir"> The <strong>images</strong> directory contains the small images  <img src="template/public/images/th_arrow_asc.gif" style="display:inline"> and  <img src="template/public/images/th_arrow_desc.gif" style="display:inline"> which show the user the sorting direction of a given column.</li>
        <li class="dir"> The <strong>javascripts</strong>  directory which powers the dynamic functionality of a table. Each file depends on <a href="http://jquery.com/">jQuery</a>:
          <ul>
            <li class="file"><strong>application.js</strong> dispatches to the other files to render the table at load time. It also defines the column highlighting function. </li>
            <li class="file"><strong>jquery.tablesorter.js</strong> the jQuery <a href="http://tablesorter.com/docs/">tablesorter plugin</a> that handles the dynamic sorting by column.</li>
            <li class="file"><strong>jquery.tablesorter.pager.js</strong> the jQuery <a href="http://tablesorter.com/docs/example-pager.html">pager plugin</a> to tablesorter that provides the paging functionality.</li>
            <li class="file"><strong>jquery.tablesorter.multipagefilter.js</strong> a custom plugin that allows for table searching across multiple pages</li>
          </ul>
        </li>
        <li class="dir">The <strong>stylesheets</strong> directory contains <strong>application.css</strong>, the <strong>TableSetter</strong> stylesheet. Each style is prefaced with <strong>#tablefu</strong> so you should be able to include your organization's css on the page without affecting the tables.</li>
      </ul>
       <p class="dir">The <strong>tables</strong> folder contains yml configuration files for each of the tables you want to deploy.
        <ul>
          <li class="file"><strong>example.yml</strong> contains the configuration for a simple table of ProPublica's coverage of failed banks in the latest recession.</li>
          <li class="file"><strong>example_local.yml</strong> and <strong>example_local.csv</strong> shows how to build a table from a local file of 5800 approved stimulus projects from last year. It also is hard_paginated (see <a href="#thefile">A Table Setter File</a>).</li>
          <li class="file"><strong>example_faceted.yml</strong> displays a table of stimulus appropriations faceted by state.</li>
          <li class="file"><strong>example_formatted.yml</strong> and <strong>example_formatted.csv</strong> shows the bar formatter in a table of stimulus spending data.</li>
        </ul>
        </p>
        </p>
        <p class="dir">The <strong>views</strong> directory</p>

    <h2><a name="thefile" href="#toc">A TableSetter File</a></h2>
    <h2><a name="deployment" href="#toc">Deployment</a></h2>
    <h3>Heroku</h3>
    <p></p>
    <h3>Passenger</h3>
    <p></p>
    <h3>Static</h3>
    <p></p>
    <h2><a name="rails" href="#toc">Rails</a></h2>
    <h2><a name="links" href="#toc">Links</a></h2>
    <ul>
      <li><a href="http://github.com/propublica/table-fu">TableFu</a><br>
        A gem that provides the conceptual backend to <strong>TableSetter</strong>.</li>
      <li><a href="http://www.modrails.com/documentation/Users%20guide.html#_deploying_a_rack_based_ruby_application">Passenger Documentation</a><br>
        The Passenger Documention section on how to deploy a rack app under passenger.</li>
      <li><a href="http://docs.heroku.com/rack">Heroku Documentation</a><br>
        How to deploy a rack app in heroku.</li>
      <li><a href="http://github.com/propublica/table-fu/issues">Issues</a><br>
        The github issue tracker. Post bug reports and feature requests here.</li>
    </ul>
    <h2><a name="credits" href="#toc">Credits</a></h2>
    <p><a href="http://github.com/thejefflarson">Jeff Larson</a> (Maintainer), <a href="http://github.com/brianboyer/">Brian Boyer</a>, <a href="http://github.com/kleinmatic">Scott Klein</a>, <a href="http://github.com/markpercival">Mark Percival</a>, and <a href="http://github.com/seebq">Charles Brian Quinn</a>.</p>
    <h2><a name="license" href="#toc">License</a></h2>
    <pre>Copyright (c) 2010 ProPublica

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
</pre>
  </body>
</html>